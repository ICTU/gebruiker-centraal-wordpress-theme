jQuery(document).ready(function($){jQuery("#commentform").removeAttr("novalidate"),jQuery(".nojs").addClass("js"),jQuery(".js").removeClass("nojs"),jQuery("#subscribes_form").submit(function(){event.preventDefault()}),jQuery("#subscribes_form .enewletter_widget_submit").click(function(e){var t=0;e.preventDefault();var r=jQuery(this).closest(".e-newsletter-widget");if(r.find("#newsletter_action").val(jQuery(this).attr("id")),r.find("#message").text(email_newsletter_widget_scripts.saving).slideDown(),"new_subscribe"==jQuery(this).attr("id")&&""==r.find("#e_newsletter_email").val()){var i=r.find("#message"),n="true"===i.attr("aria-hidden")?!1:!0;i.attr("aria-expanded",!n),i.attr("aria-hidden",n),i.text(email_newsletter_widget_scripts.empty_email).slideDown(),t=1}if(0==t){var s=new Array;jQuery.each(r.find('input[name="e_newsletter_groups_id[]"]'),function(){(jQuery(this).is(":checked")||"hidden"==jQuery(this).attr("type"))&&s.push(jQuery(this).val())});var a=new Array;jQuery.each(r.find('input[name="e_newsletter_auto_groups_id[]"]'),function(){a.push(jQuery(this).val())});var u=new Array;jQuery.each(r.find('input[name="e_newsletter_add_groups_id[]"]'),function(){u.push(jQuery(this).val())});var d=new Array;jQuery.each(r.find('input[name="e_newsletter_remove_groups_id[]"]'),function(){d.push(jQuery(this).val())});var _={action:"manage_subscriptions_ajax",newsletter_action:r.find("#newsletter_action").val(),unsubscribe_code:r.find("#unsubscribe_code").val(),e_newsletter_email:r.find("#e_newsletter_email").val(),e_newsletter_name:r.find("#e_newsletter_name").val(),newsletter_action:r.find("#newsletter_action").val(),e_newsletter_groups_id:s,e_newsletter_auto_groups_id:a,e_newsletter_add_groups_id:u,e_newsletter_remove_groups_id:d};jQuery.post(email_newsletter_widget_scripts.ajax_url,_,function(e){e=jQuery.parseJSON(e),"undefined"!=typeof e.redirect&&e.redirect?window.location=e.redirect:(r.find("#message").slideUp("fast",function(){jQuery(this).text(e.message).slideDown("fast")}),"undefined"!=typeof e.subscribe_groups&&jQuery.each(e.subscribe_groups,function(e,t){r.find(".e_newsletter_groups_id_"+t).attr("checked",!0)}),"undefined"!=typeof e.unsubscribe_code&&r.find("#unsubscribe_code").val(e.unsubscribe_code),r.find("#"+e.view).slideDown("fast"),r.find("#"+e.hide).slideUp("fast"))})}})});