!function(e,t){"function"==typeof define&&define.amd?define(t):"object"==typeof module&&module.exports?module.exports=t():e.Tobi=t()}(this,(function(){"use strict";const e=function e(t){let n={};const r=window;let o=0,i=null,a=null,l=null,s=null,d=null,c={},u=!1,p=!1,b=!1,f=null,m=null,h=null,g=null,y=null,v=!1,A=!1;const x=[],_=[];let E=0;const L={gallery:[],slider:null,sliderElements:[],elementsLength:0,currentIndex:0,x:0};let w={},C=null,S=null;const I=function e(t){const n={selector:".lightbox",captions:!0,captionsSelector:"img",captionAttribute:"alt",nav:"auto",navText:[lightboxtranslation.navTextprev,lightboxtranslation.navTextnext],navLabel:[lightboxtranslation.navLabelprev,lightboxtranslation.navLabelnext],close:!0,closeText:lightboxtranslation.closeText,closeLabel:lightboxtranslation.closeLabel,loadingIndicatorLabel:lightboxtranslation.imageloading,counter:!0,download:!1,downloadText:"",downloadLabel:lightboxtranslation.downloadimage,keyboard:!0,zoom:!0,zoomText:lightboxtranslation.zoomtext,docClose:!0,swipeClose:!0,hideScrollbar:!0,draggable:!0,threshold:100,rtl:!1,loop:!1,autoplayVideo:!1};return t&&Object.keys(t).forEach((function(e){n[e]=t[e]})),n},T={image:{checkSupport:function(e){return!e.hasAttribute("data-type")&&e.href.match(/\.(png|jpe?g|tiff|tif|gif|bmp|webp|svg|ico)(\?.*)?$/i)},init:function(e,t){const r=document.createElement("figure"),i=document.createElement("figcaption"),a=document.createElement("img"),l=e.querySelector("img"),s=document.createElement("div");a.style.opacity="0",l&&(a.alt=l.alt||""),a.setAttribute("src",""),a.setAttribute("data-src",e.href),r.appendChild(a),n.captions&&(i.style.opacity="0","self"===n.captionsSelector&&e.getAttribute(n.captionAttribute)?i.textContent=e.getAttribute(n.captionAttribute):"img"===n.captionsSelector&&l&&l.getAttribute(n.captionAttribute)&&(i.textContent=l.getAttribute(n.captionAttribute)),i.textContent&&(i.id="tobi-figcaption-"+o,r.appendChild(i),a.setAttribute("aria-labelledby",i.id),++o)),t.appendChild(r),s.className="tobi-loader",s.setAttribute("role","progressbar"),s.setAttribute("aria-label",n.loadingIndicatorLabel),t.appendChild(s),t.setAttribute("data-type","image")},onPreload:function(e){T.image.onLoad(e)},onLoad:function(e){const t=e.querySelector("img");if(!t.hasAttribute("data-src"))return;const n=e.querySelector("figcaption"),r=e.querySelector(".tobi-loader");t.onload=function(){e.removeChild(r),t.style.opacity="1",n&&(n.style.opacity="1")},t.setAttribute("src",t.getAttribute("data-src")),t.removeAttribute("data-src")},onLeave:function(e){},onCleanup:function(e){}},html:{checkSupport:function(e){return ce(e,"html")},init:function(e,t){const n=e.hasAttribute("href")?e.getAttribute("href"):e.getAttribute("data-target"),r=document.querySelector(n);if(!r)throw new Error("Ups, I can't find the target "+n+".");t.appendChild(r),t.setAttribute("data-type","html")},onPreload:function(e){},onLoad:function(e){const t=e.querySelector("video");t&&(t.hasAttribute("data-time")&&t.readyState>0&&(t.currentTime=t.getAttribute("data-time")),n.autoplayVideo&&t.play())},onLeave:function(e){const t=e.querySelector("video");t&&(t.paused||t.pause(),t.readyState>0&&t.setAttribute("data-time",t.currentTime))},onCleanup:function(e){const t=e.querySelector("video");if(t&&t.readyState>0&&t.readyState<3&&t.duration!==t.currentTime){const n=t.cloneNode(!0);ue(t),t.load(),t.parentNode.removeChild(t),e.appendChild(n)}}},iframe:{checkSupport:function(e){return ce(e,"iframe")},init:function(e,t){const n=document.createElement("iframe"),r=e.hasAttribute("href")?e.getAttribute("href"):e.getAttribute("data-target");n.setAttribute("frameborder","0"),n.setAttribute("src",""),n.setAttribute("data-src",r),e.getAttribute("data-width")&&(n.style.maxWidth=e.getAttribute("data-width")+"px"),e.getAttribute("data-height")&&(n.style.maxHeight=e.getAttribute("data-height")+"px"),t.appendChild(n),t.setAttribute("data-type","iframe")},onPreload:function(e){},onLoad:function(e){const t=e.querySelector("iframe");t.setAttribute("src",t.getAttribute("data-src"))},onLeave:function(e){},onCleanup:function(e){}},youtube:{checkSupport:function(e){return ce(e,"youtube")},init:function(e,t){const n=document.createElement("div");t.appendChild(n),_[E]=new window.YT.Player(n,{host:"https://www.youtube-nocookie.com",height:e.getAttribute("data-height")||"360",width:e.getAttribute("data-width")||"640",videoId:e.getAttribute("data-id"),playerVars:{controls:e.getAttribute("data-controls")||1,rel:0,playsinline:1}}),t.setAttribute("data-player",E),t.setAttribute("data-type","youtube"),E++},onPreload:function(e){},onLoad:function(e){n.autoplayVideo&&_[e.getAttribute("data-player")].playVideo()},onLeave:function(e){1===_[e.getAttribute("data-player")].getPlayerState()&&_[e.getAttribute("data-player")].pauseVideo()},onCleanup:function(e){1===_[e.getAttribute("data-player")].getPlayerState()&&_[e.getAttribute("data-player")].pauseVideo()}}};Object.entries||(Object.entries=function(e){const t=Object.keys(e);let n=t.length;const r=new Array(n);for(;n--;)r[n]=[t[n],e[t[n]]];return r});const N=function e(t){n=I(t),i||Y();const r=document.querySelectorAll(n.selector);if(!r)throw new Error("Ups, I can't find the selector "+n.selector+".");Array.prototype.forEach.call(r,(function(e){O(e)}))},O=function e(t,n){if(null===document.querySelector('[data-type="youtube"]')||A)P(t,n);else{if(null===document.getElementById("iframe_api")){const e=document.createElement("script"),t=document.getElementsByTagName("script")[0];e.id="iframe_api",e.src="https://www.youtube.com/iframe_api",t.parentNode.insertBefore(e,t)}-1===x.indexOf(t)&&x.push(t),window.onYouTubePlayerAPIReady=function(){Array.prototype.forEach.call(x,(function(e){P(e,n)})),A=!0}}},k=function e(t){if(console.log(t),t)return t.hasAttribute("data-group")?t.getAttribute("data-group"):"default"},q=function e(t){return JSON.parse(JSON.stringify(t))},P=function e(t,r){if(C=k(t),Object.prototype.hasOwnProperty.call(w,C)||(w[C]=q(L),z()),-1!==w[C].gallery.indexOf(t))throw new Error("Ups, element already added to the lightbox.");if(w[C].gallery.push(t),w[C].elementsLength++,n.zoom&&t.querySelector("img")){const e=document.createElement("div");e.className="tobi-zoom__icon",e.innerHTML=n.zoomText,t.classList.add("tobi-zoom"),t.appendChild(e)}t.addEventListener("click",Q),j(t),he()&&C===S&&(pe(),fe()),r&&r.call(this)},X=function e(t,r){const o=k(t);if(-1===w[o].gallery.indexOf(t));else{const e=w[o].gallery.indexOf(t),i=w[o].sliderElements[e];if(w[o].elementsLength--,n.zoom&&t.querySelector(".tobi-zoom__icon")){const e=t.querySelector(".tobi-zoom__icon");e.parentNode.classList.remove("tobi-zoom"),e.parentNode.removeChild(e)}t.removeEventListener("click",Q),i.parentNode.removeChild(i),he()&&o===S&&(pe(),fe()),r&&r.call(this)}},Y=function e(){(i=document.createElement("div")).setAttribute("role","dialog"),i.setAttribute("aria-hidden","true"),i.className="tobi",(a=document.createElement("button")).className="tobi__prev",a.setAttribute("type","button"),a.setAttribute("aria-label",n.navLabel[0]),a.innerHTML=n.navText[0],i.appendChild(a),(l=document.createElement("button")).className="tobi__next",l.setAttribute("type","button"),l.setAttribute("aria-label",n.navLabel[1]),l.innerHTML=n.navText[1],i.appendChild(l),(s=document.createElement("button")).className="tobi__close",s.setAttribute("type","button"),s.setAttribute("aria-label",n.closeLabel),s.innerHTML=n.closeText,i.appendChild(s),(d=document.createElement("div")).className="tobi__counter",i.appendChild(d),r.addEventListener("resize",(function(){v||(v=!0,r.requestAnimationFrame((function(){J(),v=!1})))})),document.body.appendChild(i)},z=function e(){w[C].slider=document.createElement("div"),w[C].slider.className="tobi__slider",i.appendChild(w[C].slider)},j=function e(t){for(let e in T)if(Object.prototype.hasOwnProperty.call(T,e)&&T[e].checkSupport(t)){const n=document.createElement("div"),r=document.createElement("div");n.className="tobi__slider__slide",n.style.position="absolute",n.style.left=100*w[C].x+"%",r.className="tobi__slider__slide__content",T[e].init(t,r),n.appendChild(r),w[C].slider.appendChild(n),w[C].sliderElements.push(n),++w[C].x;break}},M=function e(t,r){if(S=null!==S?S:C,he()||t||(t=0),he()){if(!t)throw new Error("Ups, Tobi is aleady open.");if(t===w[S].currentIndex)throw new Error("Ups, slide "+t+" is already selected.")}if(-1===t||t>=w[S].elementsLength)throw new Error("Ups, I can't find slide "+t+".");n.hideScrollbar&&(document.documentElement.classList.add("tobi-is-open"),document.body.classList.add("tobi-is-open")),pe(),n.close||(s.disabled=!1,s.setAttribute("aria-hidden","true")),f=document.activeElement,w[S].currentIndex=t,K(),se(),V(w[S].currentIndex),i.setAttribute("aria-hidden","false"),fe(),U(w[S].currentIndex+1),U(w[S].currentIndex-1),r&&r.call(this)},D=function e(t){if(!he())throw new Error("Tobi is already closed.");n.hideScrollbar&&(document.documentElement.classList.remove("tobi-is-open"),document.body.classList.remove("tobi-is-open")),de(),f.focus();const r=w[S].sliderElements[w[S].currentIndex].querySelector(".tobi__slider__slide__content"),o=r.getAttribute("data-type");T[o].onLeave(r),T[o].onCleanup(r),i.setAttribute("aria-hidden","true"),w[S].currentIndex=0,t&&t.call(this)},U=function e(t){if(void 0===w[S].sliderElements[t])return;const n=w[S].sliderElements[t].querySelector(".tobi__slider__slide__content"),r=n.getAttribute("data-type");T[r].onPreload(n)},V=function e(t){if(void 0===w[S].sliderElements[t])return;const n=w[S].sliderElements[t].querySelector(".tobi__slider__slide__content"),r=n.getAttribute("data-type");T[r].onLoad(n)},H=function e(t){w[S].currentIndex>0&&(R(w[S].currentIndex),V(--w[S].currentIndex),fe("left"),G(w[S].currentIndex+1),U(w[S].currentIndex-1),t&&t.call(this))},B=function e(t){w[S].currentIndex<w[S].elementsLength-1&&(R(w[S].currentIndex),V(++w[S].currentIndex),fe("right"),G(w[S].currentIndex-1),U(w[S].currentIndex+1),t&&t.call(this))},R=function e(t){if(void 0===w[S].sliderElements[t])return;const n=w[S].sliderElements[t].querySelector(".tobi__slider__slide__content"),r=n.getAttribute("data-type");T[r].onLeave(n)},G=function e(t){if(void 0===w[S].sliderElements[t])return;const n=w[S].sliderElements[t].querySelector(".tobi__slider__slide__content"),r=n.getAttribute("data-type");T[r].onCleanup(n)},J=function e(){g=-w[S=null!==S?S:C].currentIndex*window.innerWidth,w[S].slider.style.transform="translate3d("+g+"px, 0, 0)",y=g},W=function e(){d.textContent=w[S].currentIndex+1+"/"+w[S].elementsLength},F=function e(t){let r=null;n.nav?(a.disabled=!1,l.disabled=!1,"left"===t?a.focus():l.focus(),1===w[S].elementsLength?(a.disabled=!0,l.disabled=!0,n.close&&s.focus()):(0===w[S].currentIndex&&(a.disabled=!0,l.focus()),w[S].currentIndex===w[S].elementsLength-1&&(l.disabled=!0,a.focus()))):n.close&&s.focus(),r=i.querySelectorAll(".tobi > button:not(:disabled)"),m=r[0],h=1===r.length?r[0]:r[r.length-1]},K=function e(){c={startX:0,endX:0,startY:0,endY:0}},$=function e(){const t=c.endX-c.startX,r=c.endY-c.startY,o=Math.abs(t),i=Math.abs(r);t>0&&o>n.threshold&&w[S].currentIndex>0?H():t<0&&o>n.threshold&&w[S].currentIndex!==w[S].elementsLength-1?B():r<0&&i>n.threshold&&n.swipeClose?D():J()},Q=function e(t){t.preventDefault(),S=k(this),M(w[S].gallery.indexOf(this))},Z=function e(t){t.target===a?H():t.target===l?B():(t.target===s||"tobi__slider__slide"===t.target.className&&n.docClose)&&D(),t.stopPropagation()},ee=function e(t){9===t.keyCode||"Tab"===t.code?t.shiftKey?document.activeElement===m&&(h.focus(),t.preventDefault()):document.activeElement===h&&(m.focus(),t.preventDefault()):27===t.keyCode||"Escape"===t.code?(t.preventDefault(),D()):37===t.keyCode||"ArrowLeft"===t.code?(t.preventDefault(),H()):39!==t.keyCode&&"ArrowRight"!==t.code||(t.preventDefault(),B())},te=function e(t){ye(t.target)||(t.stopPropagation(),b=!0,c.startX=t.touches[0].pageX,c.startY=t.touches[0].pageY,w[S].slider.classList.add("tobi__slider--is-dragging"))},ne=function e(t){t.stopPropagation(),b&&(t.preventDefault(),c.endX=t.touches[0].pageX,c.endY=t.touches[0].pageY,le())},re=function e(t){t.stopPropagation(),b=!1,w[S].slider.classList.remove("tobi__slider--is-dragging"),c.endX&&(u=!1,p=!1,$()),K()},oe=function e(t){ye(t.target)||(t.preventDefault(),t.stopPropagation(),b=!0,c.startX=t.pageX,c.startY=t.pageY,w[S].slider.classList.add("tobi__slider--is-dragging"))},ie=function e(t){t.preventDefault(),b&&(c.endX=t.pageX,c.endY=t.pageY,le())},ae=function e(t){t.stopPropagation(),b=!1,w[S].slider.classList.remove("tobi__slider--is-dragging"),c.endX&&(u=!1,p=!1,$()),K()},le=function e(){Math.abs(c.startX-c.endX)>0&&!p&&n.swipeClose?(w[S].slider.style.transform="translate3d("+(y-Math.round(c.startX-c.endX))+"px, 0, 0)",u=!0,p=!1):Math.abs(c.startY-c.endY)>0&&!u&&(w[S].slider.style.transform="translate3d("+y+"px, -"+Math.round(c.startY-c.endY)+"px, 0)",u=!1,p=!0)},se=function e(){n.keyboard&&document.addEventListener("keydown",ee),i.addEventListener("click",Z),n.draggable&&(ge()&&(i.addEventListener("touchstart",te),i.addEventListener("touchmove",ne),i.addEventListener("touchend",re)),i.addEventListener("mousedown",oe),i.addEventListener("mouseup",ae),i.addEventListener("mousemove",ie))},de=function e(){n.keyboard&&document.removeEventListener("keydown",ee),i.removeEventListener("click",Z),n.draggable&&(ge()&&(i.removeEventListener("touchstart",te),i.removeEventListener("touchmove",ne),i.removeEventListener("touchend",re)),i.removeEventListener("mousedown",oe),i.removeEventListener("mouseup",ae),i.removeEventListener("mousemove",ie))},ce=function e(t,n){return t.getAttribute("data-type")===n},ue=function e(t){const n=t.querySelectorAll("src");n&&Array.prototype.forEach.call(n,(function(e){e.setAttribute("src","")}))},pe=function e(){n.draggable&&w[S].elementsLength>1&&!w[S].slider.classList.contains("tobi__slider--is-draggable")&&w[S].slider.classList.add("tobi__slider--is-draggable"),!n.nav||1===w[S].elementsLength||"auto"===n.nav&&ge()?(a.setAttribute("aria-hidden","true"),l.setAttribute("aria-hidden","true")):(a.setAttribute("aria-hidden","false"),l.setAttribute("aria-hidden","false")),n.counter&&1!==w[S].elementsLength?d.setAttribute("aria-hidden","false"):d.setAttribute("aria-hidden","true")},be=function e(){for(let e in w)Object.prototype.hasOwnProperty.call(w,e)&&(w[e].slider.style.display=S===e?"block":"none")},fe=function e(t){be(),J(),W(),F(t)},me=function e(t){he()&&D();const n=Object.entries(w);Array.prototype.forEach.call(n,(function(e){const t=e[1].gallery;Array.prototype.forEach.call(t,(function(e){X(e)}))})),i.parentNode.removeChild(i),w={},C=S=null,o=0,t&&t.call(this)},he=function e(){return"false"===i.getAttribute("aria-hidden")},ge=function e(){return"ontouchstart"in window},ye=function e(t){return-1!==["TEXTAREA","OPTION","INPUT","SELECT"].indexOf(t.nodeName)||t===a||t===l||t===s||1===w[S].elementsLength},ve=function e(){return w[S].currentIndex},Ae=function e(){return null!==S?S:C},xe=function e(t){if(he())throw new Error("Ups, I can't do this. Tobi is open.");if(t){if(t&&!Object.prototype.hasOwnProperty.call(w,t))throw new Error("Ups, I don't have a group called \""+t+'".');S=t}};return N(t),{open:M,prev:H,next:B,close:D,add:O,remove:X,destroy:me,isOpen:he,currentSlide:ve,selectGroup:xe,currentGroup:Ae}};return e}));