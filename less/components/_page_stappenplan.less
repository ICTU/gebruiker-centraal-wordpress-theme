// Gebruiker Centraal - components/_page_stappenplan.less
// ----------------------------------------------------------------------------------
// layout voor pagina template 'page_stappenplan'
// ----------------------------------------------------------------------------------
// @package gebruiker-centraal
// @author  Paul van Buuren
// @license GPL-2.0+
// @version 3.29.4
// @desc.   Stappenplan-functionaliteit verplaatst naar pagina-template 'page_stappenplan'.
// @link    https://github.com/ICTU/gebruiker-centraal-wordpress-theme


/*
==============================================================================================================
// local variables
*/
@stepcounter_width: 6rem;
@clip1: 4px;
@widthclip: 60px;
@stepminheight: ( ( 75 / 10 ) * 1rem ); // 75px;
@tweekeerpijtljes: ( 2 * @widthclip );


/*
==============================================================================================================
*/

.page_stappenplan();

/*
==============================================================================================================
*/
.page_stappenplan() {

  .page-template-page_stappenplan {
    .content .entry {
      background-color: @wit;
    }
  }

  .stappenplan-h2 {
    .visuallyhidden();
  }

  .stappenplan.flexbox {
    margin-left: 0;
    padding-left: 0;
    background: @wit;

    *, li {
      list-style: none;
    }

    li {
      box-sizing: border-box;
      overflow: hidden;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    h3, h4 {
      margin: 0;
      padding: 0;
    }

    .titelspan {
      margin: 0;
      padding: 0 1rem 0 0;
      font-family: @bodyfont_bold;
    }

    .stap-example {
      background: @gc_pantybrown_light;
      color: @txt;
      padding: 2rem;
      box-shadow: 3px 3px 0px rgba(#000, 0.2);
      margin-top: 4rem;
      margin-bottom: 2rem;
      position: relative;
      font-size: 90%;

      h4 {
        margin-bottom: .5rem;
        font-size: 1.5rem;
      }

      p {
        margin-bottom: 0;
        font-size: 1.5rem;
      }

      &:before {
        position: absolute;
        top: 0;
        left: 10px;
        display: block;
        transform: rotate(45deg) translate(0, -15px);
        content: ' ';
        color: @gc_pantybrown_light;
        background: @gc_pantybrown_light;
        width: 21px;
        height: 21px;
        speak: none;
      }
    }

    .stap-intro {
      .bold-font();
    }

    @media only screen and (max-width: ( @break_fullwidth ) ) {
      flex-direction: column;
      counter-reset: stappenplan;
      padding-bottom: 3rem;
      position: relative;

      li {
        background: @gc_a11y_green;
        counter-increment: stappenplan;

        &:before {
          box-sizing: border-box;
          display: block;
          float: left;
          background-color: @gc_a11y_green_dark;
          color: @wit;
          font-size: 130%;
          content: counter(stappenplan) '.';
          width: @stepcounter_width;
          text-align: center;
          padding-top: 2.5rem;
          padding-bottom: 1.5rem;
          font-family: @bodyfont_bold;

          background-image: url('../images/steps-vertical-middle-bottom.svg');
          background-position: center -6px;

        }

        .step-content {
          width: 95%;
          width: ~"calc(100% - @{stepcounter_width})";
          background: @wit;
          float: left;
          padding-left: 3rem;
          padding-right: 1rem;
          padding-top: 3rem;
          margin: 0;

          .stap-example {
            margin-right: 1rem;
          }

          .titelspan {
            margin-bottom: 2rem;
            position: relative;
            font-size: 125%;

            &:before {
              content: ' ';
              display: block;
              background: @gc_pantybrown;
              position: absolute;
              left: 0;
              height: .5rem;
              width: 2.5rem;
              transform: translateX(-4rem) translateY(1rem);
              speak: none;
            }
          }

        }

        .step-counter {
          display: none;
        }

        &:first-of-type {
          &:before {
            background-image: url('../images/steps-vertical-first.svg');
            background-position: center -63px;
          }

        }

        &:last-of-type {
          &:after {
            display: block;
            background-image: url('../images/steps-vertical-last.svg');
            background-position: center bottom;
            content: ' - ';
            width: @stepcounter_width;
            min-height: @stepcounter_width;
            position: absolute;
            bottom: 0;
            left: 0;
            speak: none;
          }
        }
      }
    }

    @media only screen and (min-width: ( @contentmaxwidth ) ) {
      margin-left: ( ( ( @contentmaxwidth - @break_fullwidth ) / 2 ) * -1 );
      margin-right: ( ( ( @contentmaxwidth - @break_fullwidth ) / -2 ) * 1 );
    }

    @media only screen and (min-width: ( @break_fullwidth ) ) {

      flex-direction: row;

      li {
        flex: 1 0 20rem;
        flex: 1 0 20%;

        .titelspan {
          display: flex;
          background: @gc_a11y_green;
          background-image: url('../images/steps-horizontal-middle-left.svg');
          background-position: right center;
          background-repeat: no-repeat;
          color: @wit;
          min-height: @stepminheight;
          align-items: center;

          .step-counter {
            max-width: @widthclip;
            flex: 1 1 @widthclip;
          }

          .step-counter {
            background-image: url('../images/steps-horizontal-middle-right.svg');
            background-color: @gc_a11y_green_dark;
            background-position: left center;
            background-repeat: no-repeat;

            display: flex;
            justify-content: center;
            flex-direction: column;
            min-height: @stepminheight;
            text-align: center;
          }

          .step-title {
            flex: 1 1 auto;
            padding-left: 2rem;
            background: @gc_a11y_green;
          }
        }

        .stap-intro,
        .stap-example,
        .stap-text {
          margin-left: 1rem;
          margin-right: 1rem;

          p {
            margin-bottom: 0;
          }
        }

        .stap-intro,
        .stap-text {
          margin-top: 1rem;
          padding: 0 1em;

          p {
            margin-left: 1rem;
            margin-right: 1rem;
          }
        }

        &:first-of-type {
          border-color: green;

          .titelspan {
            .step-counter {
              background-image: url('../images/steps-horizontal-left-first.svg');
              background-position: right center;
            }
          }
        }

        &:last-of-type {
          border-color: purple;

          .titelspan {
            background-image: url('../images/steps-horizontal-right-last.svg');
          }
        }

        &:nth-last-child(3):first-child,
        &:nth-last-child(3):first-child ~ li {
          /* green squids! */

          .step-title {
            font-size: 2rem;
          }
        }

        &:nth-last-child(4):first-child,
        &:nth-last-child(4):first-child ~ li {
          /* green squids! */

          .step-title {
            font-size: 1.8rem;
          }
        }

        &:nth-last-child(5):first-child,
        &:nth-last-child(5):first-child ~ li {
          /* green squids! */

          .step-title {
            font-size: 1.5rem;
          }
        }
      }
    }
  }

  @media only screen and (min-width: ( @contentmaxwidth ) ) {
    .entry-content > .stappenplan.flexbox {
      margin-top: 4rem; // because of sharing icons.
    }
  }


  @media screen and (-ms-high-contrast: active) and (min-width: ( @break_fullwidth ) ), screen and (-ms-high-contrast: none) and (min-width: ( @break_fullwidth ) ) {
    /* IE10+ specific styles go here */
    .step-counter {
      font-size: 3rem;
      padding-top: 2rem;
    }

    nav.nav-primary {

      li.menu-item-has-children {
        span,
        span[itemprop="name"] {
          &:after {
            top: 3px;
          }
        }
      }
    }
  }
}
